-- gomock.patch --
=> examples/gomock-v1.5.0.patch

-- foo_test.in.go --
package foo

import (
	"testing"

	"github.com/golang/mock/gomock"
)

func TestFoo(t *testing.T) {
	ctrl := gomock.NewController(t)
	defer ctrl.Finish()

	run(NewFooMock(ctrl))
}

-- foo_test.out.go --
package foo

import (
	"testing"

	"github.com/golang/mock/gomock"
)

func TestFoo(t *testing.T) {
	ctrl := gomock.NewController(t)

	run(NewFooMock(ctrl))
}

-- foo_test.diff --
@@ -8,7 +8,6 @@
 
 func TestFoo(t *testing.T) {
 	ctrl := gomock.NewController(t)
-	defer ctrl.Finish()
 
 	run(NewFooMock(ctrl))
 }

-- foo_test.diff.stderr --
In gomock 1.50, the Controller.Finish method is called automatically when
the test finishes running. We no longer need to call mockCtrl.Finish
manually.

-- bar_test.in.go --
package bar

import (
	"testing"

	"github.com/golang/mock/gomock"
)

func TestBar(t *testing.T) {
	ctrl := gomock.NewController(t)
	dir := t.TempDir()
	defer ctrl.Finish()

	run(NewBarMock(ctrl))
}

-- bar_test.out.go --
package bar

import (
	"testing"

	"github.com/golang/mock/gomock"
)

func TestBar(t *testing.T) {
	ctrl := gomock.NewController(t)
	dir := t.TempDir()

	run(NewBarMock(ctrl))
}

-- bar_test.diff --
@@ -9,7 +9,6 @@
 func TestBar(t *testing.T) {
 	ctrl := gomock.NewController(t)
 	dir := t.TempDir()
-	defer ctrl.Finish()
 
 	run(NewBarMock(ctrl))
 }

-- bar_test.diff.stderr --
In gomock 1.50, the Controller.Finish method is called automatically when
the test finishes running. We no longer need to call mockCtrl.Finish
manually.

-- named_import.in.go --
package baz

import (
	"testing"

	mock "github.com/golang/mock/gomock"
)

func TestBaz(t *testing.T) {
	mockCtrl := mock.NewController(t)
	defer mockCtrl.Finish()

	run(NewBazMock(mockCtrl))
}

-- named_import.out.go --
package baz

import (
	"testing"

	mock "github.com/golang/mock/gomock"
)

func TestBaz(t *testing.T) {
	mockCtrl := mock.NewController(t)

	run(NewBazMock(mockCtrl))
}

-- named_import.diff --
@@ -8,7 +8,6 @@
 
 func TestBaz(t *testing.T) {
 	mockCtrl := mock.NewController(t)
-	defer mockCtrl.Finish()
 
 	run(NewBazMock(mockCtrl))
 }

-- named_import.diff.stderr --
In gomock 1.50, the Controller.Finish method is called automatically when
the test finishes running. We no longer need to call mockCtrl.Finish
manually.
