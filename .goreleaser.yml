builds:
  - env:
      - CGO_ENABLED=0
    goos:
      - linux
      - windows
      - darwin
    # The default flags from goreleaser set a "version" variable instead of our
    # preferred "_version". The "-w" skips DWARF generation to reduce the
    # binary size (https://github.com/golang/go/issues/26074). This will not
    # affect usability of panics and profiling.
    ldflags: '-w -X main._version={{.Version}}'

# List of replacements generated by goreleaser to match the output of `uname`
# on various systems. This will make the binary more easily curl-able.
archives:
  - name_template: >-
      {{ .ProjectName }}_
      {{- title .Os }}_
      {{- if eq .Arch "amd64" }}x86_64
      {{- else if eq .Arch "386" }}i386
      {{- else }}{{ .Arch }}{{ end }}

checksum:
  name_template: 'checksums.txt'

# Snapshot releases should have the -dev suffix.
snapshot:
  name_template: "{{ incpatch .Tag }}-dev"

changelog:
  # Skip commit log generation because we'll build ours from the CHANGELOG.md.
  skip: true
